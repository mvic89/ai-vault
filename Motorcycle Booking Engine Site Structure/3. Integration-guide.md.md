(Complete step-by-step guide)

# 🏍️ Complete Integration Guide

## OSM Data Extraction → Your Motorcycle Directory Website

This guide will walk you through the **complete process** from downloading OSM data to displaying it on your website.

---

## 📁 Required File Structure

Your project should look like this:

```
motorcycle-directory/
│
├── index.html                          # Your main website file
├── styles/
│   └── styles.css                      # Your CSS file
├── scripts/
│   └── scripts.js                      # Your JavaScript file
├── data/
│   └── directory_data.json            # Generated by conversion script
│
├── osm_downloads/                      # Auto-created by OSM extractor
│   ├── germany-latest.osm.pbf         # Downloaded OSM data
│   └── france-latest.osm.pbf          # etc.
│
├── osm_mc_repair_extractor.py         # OSM data extractor
├── convert_osm_to_json.py             # CSV to JSON converter
├── requirements.txt                    # Python dependencies
└── motorcycle_repair_shops.csv        # Generated by OSM extractor
```

---

## 🚀 Step-by-Step Integration Process

### Step 1: Setup Python Environment (One-time)

**On Windows:**

```cmd
# Install Python dependencies
pip install osmium requests

# Or use requirements file
pip install -r requirements.txt
```

**On Mac/Linux:**

```bash
# Install Python dependencies
pip3 install osmium requests

# Or use requirements file
pip3 install -r requirements.txt
```

**Verification:**

```bash
python --version
# Should show Python 3.8 or higher
```

---

### Step 2: Extract OSM Data

Choose which countries you want to include. Here are some examples:

#### Example A: Small Test (2 minutes)

Perfect for testing the workflow:

```bash
python osm_mc_repair_extractor.py luxembourg
```

**Result:** `motorcycle_repair_shops.csv` with ~10-30 shops

---

#### Example B: Major EU Countries (2-3 hours)

For a comprehensive directory:

```bash
python osm_mc_repair_extractor.py germany france italy spain netherlands belgium
```

**Result:** `motorcycle_repair_shops.csv` with ~8,000-15,000 shops

---

#### Example C: All EU Countries (4-6 hours)

Complete EU coverage:

```bash
python osm_mc_repair_extractor.py austria belgium bulgaria croatia cyprus czech-republic denmark estonia finland france germany greece hungary ireland italy latvia lithuania luxembourg malta netherlands poland portugal romania slovakia slovenia spain sweden
```

**Result:** `motorcycle_repair_shops.csv` with ~20,000-30,000 shops

---

#### Example D: Specific Region

Nordic countries only:

```bash
python osm_mc_repair_extractor.py sweden denmark finland norway
```

---

### Step 3: Convert CSV to JSON

After the OSM extraction completes, convert the CSV to your website's JSON format:

```bash
python convert_osm_to_json.py
```

**What this does:**

1. Reads `motorcycle_repair_shops.csv` (from Step 2)
2. Converts OSM format to your website's JSON format
3. Creates `data/directory_data.json` (your website reads this)
4. Builds the countries/cities index for filters

**Custom options:**

```bash
# Custom input/output files
python convert_osm_to_json.py --input shops.csv --output data/my_data.json

# Include shops without names
python convert_osm_to_json.py --include-unnamed
```

---

### Step 4: Test Your Website

Open your `index.html` in a web browser:

**On Windows:**

- Double-click `index.html`
- Or right-click → "Open with" → Your browser

**On Mac:**

- Double-click `index.html`
- Or `open index.html` in terminal

**On Linux:**

```bash
xdg-open index.html
# Or
firefox index.html
```

---

## 🔄 Complete Workflow Example

Here's a complete example from start to finish:

```bash
# 1. Install dependencies (one-time)
pip install -r requirements.txt

# 2. List available countries
python osm_mc_repair_extractor.py --list-countries

# 3. Extract data for Germany and France (30-60 min)
python osm_mc_repair_extractor.py germany france

# 4. Convert to JSON format (< 1 min)
python convert_osm_to_json.py

# 5. Open website
# Double-click index.html or use command above
```

**Expected output:**

- `motorcycle_repair_shops.csv` - Raw OSM data
- `data/directory_data.json` - Website-ready data
- Website shows 4,000-6,000 shops from Germany and France

---

## 📊 Data Format Comparison

### OSM CSV Format (motorcycle_repair_shops.csv)

```csv
osm_id,osm_type,latitude,longitude,name,address_street,address_city,phone,website,...
123456,node,52.52,13.405,Berlin Motorcycle,Hauptstr. 10,Berlin,+4930123456,https://...
```

### Website JSON Format (directory_data.json)

```json
{
  "shops": [
    {
      "name": "Berlin Motorcycle",
      "address": "Hauptstr. 10",
      "city": "Berlin, Germany",
      "phone": "+4930123456",
      "website": "https://...",
      "rating": "N/A",
      "reviews_count": "0",
      "hours": "Mon-Fri 9-5",
      "latitude": 52.52,
      "longitude": 13.405,
      "business_type": "Motorcycle Repair Shop"
    }
  ],
  "countries": {
    "Germany": ["Berlin", "Munich", "Hamburg", ...],
    "France": ["Paris", "Lyon", "Marseille", ...]
  }
}
```

---

## 🛠️ Troubleshooting

### Problem 1: "osmium module not found"

**Solution:**

```bash
pip install osmium --break-system-packages
# Or
pip install --user osmium
```

### Problem 2: "motorcycle_repair_shops.csv not found"

**Solution:** You need to run the OSM extractor first:

```bash
python osm_mc_repair_extractor.py luxembourg
```

### Problem 3: Website shows "Error Loading Data"

**Solution:**

- Check that `data/directory_data.json` exists
- Check that your file structure matches the required structure
- Open browser console (F12) to see error details

**Verify file exists:**

```bash
# Windows
dir data\directory_data.json

# Mac/Linux
ls -lh data/directory_data.json
```

### Problem 4: Empty JSON or no shops showing

**Solution:**

- Check that CSV has data: `head motorcycle_repair_shops.csv`
- Run converter with `--include-unnamed` flag
- Verify the CSV came from the OSM extractor (correct format)

### Problem 5: "data folder not found"

**Solution:** Create the data folder:

```bash
# Windows
mkdir data

# Mac/Linux
mkdir -p data
```

### Problem 6: Download fails or is very slow

**Solution:**

- Check internet connection
- Try downloading smaller countries first
- Geofabrik might be temporarily slow - try again later
- Use `--skip-download` if files already exist

---

## 🎯 Quick Commands Reference

### See all available countries

```bash
python osm_mc_repair_extractor.py --list-countries
```

### Test with smallest country

```bash
python osm_mc_repair_extractor.py luxembourg
python convert_osm_to_json.py
```

### Extract specific countries

```bash
python osm_mc_repair_extractor.py germany france italy
```

### Custom output location

```bash
python osm_mc_repair_extractor.py germany --output de_shops.csv
python convert_osm_to_json.py --input de_shops.csv
```

### Re-extract without re-downloading

```bash
python osm_mc_repair_extractor.py germany --skip-download
```

### Force fresh download (get latest data)

```bash
python osm_mc_repair_extractor.py germany --force-redownload
```

---

## 🔄 Updating Your Data (Monthly Maintenance)

To keep your directory current with the latest OSM data:

```bash
# 1. Re-download fresh data
python osm_mc_repair_extractor.py germany france --force-redownload

# 2. Convert to JSON
python convert_osm_to_json.py

# 3. Refresh browser
# Your website now shows updated data
```

**Recommended schedule:** Monthly updates

---

## 📈 Processing Times & Expectations

|Countries|Download|Extract|Total|Expected Shops|
|---|---|---|---|---|
|Luxembourg|30s|30s|1 min|10-30|
|Netherlands|5 min|5 min|10 min|300-600|
|Germany|15 min|30 min|45 min|2,000-4,000|
|Germany + France|30 min|60 min|90 min|4,000-7,000|
|Top 5 countries*|60 min|90 min|2.5 hrs|8,000-15,000|
|All 27 EU countries|120 min|180 min|5 hrs|20,000-30,000|

*Top 5: Germany, France, Italy, Spain, UK

---

## 💡 Tips & Best Practices

### 1. Start Small, Scale Up

```bash
# Day 1: Test with Luxembourg
python osm_mc_repair_extractor.py luxembourg
python convert_osm_to_json.py
# Verify website works

# Day 2: Add major countries
python osm_mc_repair_extractor.py germany france italy
python convert_osm_to_json.py
```

### 2. Process in Batches

```bash
# Batch 1: Western Europe
python osm_mc_repair_extractor.py germany france netherlands belgium
python convert_osm_to_json.py

# Later, add Batch 2: Southern Europe
python osm_mc_repair_extractor.py italy spain portugal greece
# Then re-run converter with all data
```

### 3. Keep Backups

```bash
# Backup your JSON before updating
cp data/directory_data.json data/directory_data_backup.json

# If something goes wrong, restore
cp data/directory_data_backup.json data/directory_data.json
```

### 4. Schedule Regular Updates

Create a simple script `update_data.bat` (Windows) or `update_data.sh` (Mac/Linux):

**Windows (`update_data.bat`):**

```batch
@echo off
echo Updating motorcycle directory data...
python osm_mc_repair_extractor.py germany france italy --force-redownload
python convert_osm_to_json.py
echo Update complete!
pause
```

**Mac/Linux (`update_data.sh`):**

```bash
#!/bin/bash
echo "Updating motorcycle directory data..."
python3 osm_mc_repair_extractor.py germany france italy --force-redownload
python3 convert_osm_to_json.py
echo "Update complete!"
```

Run monthly to keep data fresh.

---

## 📝 Checklist

Use this checklist for your first run:

- [ ] Python 3.8+ installed
- [ ] Dependencies installed (`pip install osmium requests`)
- [ ] All files in correct structure
- [ ] Ran OSM extractor for at least one country
- [ ] CSV file created (`motorcycle_repair_shops.csv`)
- [ ] Ran converter script
- [ ] `data/directory_data.json` created
- [ ] Opened `index.html` in browser
- [ ] Website shows shops with filters working

---

## 🎓 Understanding the Process

```
┌─────────────────────────────────────────────────────────┐
│  STEP 1: EXTRACT OSM DATA                               │
│  python osm_mc_repair_extractor.py germany              │
│                                                          │
│  Downloads: germany-latest.osm.pbf (3.8 GB)            │
│  Extracts: Motorcycle repair shops                      │
│  Creates: motorcycle_repair_shops.csv                   │
└─────────────────────────────────────────────────────────┘
                         │
                         ▼
┌─────────────────────────────────────────────────────────┐
│  STEP 2: CONVERT TO JSON                                │
│  python convert_osm_to_json.py                          │
│                                                          │
│  Reads: motorcycle_repair_shops.csv                     │
│  Transforms: OSM format → Your website format           │
│  Creates: data/directory_data.json                      │
└─────────────────────────────────────────────────────────┘
                         │
                         ▼
┌─────────────────────────────────────────────────────────┐
│  STEP 3: WEBSITE DISPLAYS DATA                          │
│  Open: index.html in browser                            │
│                                                          │
│  Loads: data/directory_data.json                        │
│  Shows: Shops with filters, map links, etc.            │
│  Users: Can search, filter by country/city/rating      │
└─────────────────────────────────────────────────────────┘
```

---

## 🆘 Need More Help?

1. **Check console output** - Both scripts provide detailed progress
2. **Verify file exists** - Make sure files are where expected
3. **Check browser console** - Press F12 in browser to see errors
4. **Start simple** - Test with Luxembourg first
5. **Read the docs** - Check README.md for detailed documentation

---

## 📞 Common Questions

**Q: Do I need to keep the CSV file after conversion?** A: No, but it's useful for reference. You can delete it to save space.

**Q: Can I add shops manually to the JSON?** A: Yes, but they'll be overwritten next time you run the converter. Better to add them to OpenStreetMap instead.

**Q: How do I add ratings/reviews to shops?** A: OSM doesn't have ratings. You'd need to integrate Google Places API or similar (advanced topic).

**Q: Can I use this for other types of businesses?** A: Yes! Modify the OSM filter tags in `osm_mc_repair_extractor.py` to extract different shop types.

**Q: What about shops outside the EU?** A: The extractor works worldwide. Check Geofabrik for available regions: https://download.geofabrik.de/

---

**🎉 You're all set! Follow these steps and you'll have a fully functional motorcycle directory website with real OSM data.**